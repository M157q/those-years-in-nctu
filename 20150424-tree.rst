===============
20150424 永生樹
===============

最近 IoT 很紅，我們老師也覺得很有興趣，構思了一套系統，想製作一個 GUI 介面，讓使用者可以像玩玩具一樣，用滑鼠操作點擊，把各式各樣的裝置連在一起。

老師和外校某一位老師有合作（別怪我，我是真的忘記名字了），那位老師是做互動藝術的，借給我們一條會動的、外型類似觸手的裝置，還給了我們一支 Java 視窗程式，讓一朵蒲公英花隨著滑鼠的移動展開、收合。

其實這朵花還滿漂亮的，線條聚在一起的時候真的有很蓬鬆的感覺，外圍線條很密，形狀圓圓的，靠近中心的地方較稀疏，真的很像蒲公英花。

就是 Code 品質不怎麼好。

老師想把這朵花加進我們的系統，我的指導學長先看過 Code，拿給我，也告訴我改哪裡就好。於是我花了點時間看了看，加點東西，修改一下，加點必要的 Code，和我們系統的協定接起來，現在可以把它當成一個「裝置」來玩。

----

三天前學長說，那支程式有更新，要請我把改動加進手邊的 Code 裡面。他說基本上只是增加一些特效，應該不會太困難。不過考慮到我有改過 Code，新的 Code 如果直接照貼的話，我的改動就會不見，我得手動 Merge 一下才行。

昨天我打開新版本的 Code， **靠** ，還真的只寄 diff 啊， ``import`` 咧？ ``class`` 咧？

好吧，看了一下，這些是 ``class`` 的內容，不是單純的 diff，還有前後文可以讀。

越讀越受不了，Tab 和空白混用、行尾空白、沒有對齊的排版；動不動就十幾二十行的空行，又不是八卦版，吊什麼胃口啦。

不過至少沒有刪東西，只有加東西，我一行一行和手邊的 Code 比對，慢慢把改動 Apply 到自己這裡。

編譯，ok。

執行，哇嗚，開花的過程多了漸進的動畫效果，真的不錯看。我把滑鼠移來移去，改變它的形狀。

**然後突然發現特效沒了。**

What the？我把程式重開，特效正常啊？然後又沒了。原來這特效只能用一次。

好吧，總之會動，只是效果不好，寄信回報學長以後，就先這樣了。

----

學長回信：「了解。 你有心情的話就修正一下，沒有就...恩....」

唉，看一下吧，如果能解決就解一解。

----

說真的，我看過的 Code 不多，真的不多，所以我不知道什麼是完美的 Code。

但這東西很明顯是另一個方向。

整份 Code 完全就是程式設計的新手會寫出來的東西，前面說的排版問題就不再提，在場有沒有程式人？有沒有看過全域變數叫做 ``a`` 、 ``b`` 的？這兩個變數初始化以後就沒有再改，還做成參數傳進函式裡幹嘛？有個變數叫 ``parameter`` ，可不可以告訴我它是幹嘛用的？逗點的右邊沒有加空白、等號的左右沒有加空白、有一行註解寫著 ``//parameter`` ，另一行註解寫著 ``//`` 、滿滿的 Magic Number。

某段 Code 做了以下判斷：如果某個變數的值超過某個上限，就把它設為那個上限。但是讓這個變數增加的 Code 卻放在另一個地方。

然後發現特效只能用一次的原因了：有個變數 ``alpha`` 用來記錄線條的不透明度，數值越高就越不透明，但是這個值只有加沒有減，啊不就廢話這只能玩一次？這寫完以後到底有沒有測過啊？還是編譯會過就當成沒問題了？

順帶一提，根據 `Java 的 Spec`_ ， ``0.0`` 這種常數在 Java 裡面預設的型態是 ``float`` ，我真的不知道 ``float alpha=0.0;`` 到底是怎麼編譯過的。

..  _Java 的 Spec: http://docs.oracle.com/javase/specs/jls/se7/html/jls-3.html#jls-3.10.2

