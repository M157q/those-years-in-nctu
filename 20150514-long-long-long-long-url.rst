==========
好長的 URL
==========

前情提要： `我們老師構想了一套 IoT 系統 <20150424-tree.rst>`_

這個 IoT 系統可以分成兩大部份，Client 和 Server，我負責的是 Client。

Client 和 Server 之間透過 REST API 傳送資料，用 HTTP GET 來傳。

沒錯，只有 GET，Client Push 資料給 Server 也是用 GET，參數放在網址裡面。

其實這樣還滿方便的，因為可以在網頁上弄個超連結，就可以重覆測試了，用滑鼠戳戳戳戳就可以連續送很多個值。

----

後來出現了某種 Client（這支比較特別，現在是學長負責在寫），它一次會 Push 1024 個 One-Byte 整數到 Server 上，而且似乎是每 50 ~ 100 ms 就會 Push 一次。

Server 的效能並不是非常好，根據我的測試，150 ~ 300 ms 是它的極限，Delay 再減少，就會在 Push 一陣子以後卡住大約 2 ~ 3 秒，然後才繼續接受 Request。

大概算了一下這支新 Client 發的 Request 大小以後，覺得有點好笑：因為是 HTTP GET，我們需要把所有資料都先轉成 ASCII 才送出去，一個整數 1 個 Byte，範圍從 -127 ~ 128，也就是 1 ~ 4 個字元，我們先隨便估一個整數用掉 2 個字元好了，這樣算起來 1024 個整數需要 2048 個 Byte 來傳送。

這些整數之間要用逗點分開，1024 個整數需要 1023 個逗點，所以現在總共要 3071 個 Byte 了；頭尾各用一個中括號包起來，總共 3093 個 Byte；URL 的其他部份加起來有 62 個字，實際上可能會隨著 Host name 改變，但差不多，這樣總共 3155 個 Byte。

那支 Client 每 50 毫秒就會發出一個 HTTP Request，URL 的長度有 3155 個字元，我從來沒看過那麼長的 URL XDDD

